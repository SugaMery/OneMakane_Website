<app-header></app-header>
<main class="main">
  <div class="page-header mt-30 mb-50">
    <div class="container">
      <!--       <div class="archive-header" style="padding-bottom: 0px">
 -->
      <div class="archive-header">
        <div class="row align-items-center">
          <div class="col-xl-12">
            <h1 class="mb-15">Mes Favoris</h1>
            <div class="breadcrumb">
              <a href="/" rel="nofollow"><i class="fi-rs-home mr-5"></i>Home</a>

              <span></span> Mes favoris
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="container mb-30">
    <div class="row">
      <div
        class="col-lg-12"
        style="
          padding-right: calc(var(--bs-gutter-x) * 0.5);
          padding-left: calc(var(--bs-gutter-x) * 0.5);
        "
      >
        <div class="shop-product-fillter filter">
          <div class="totall-product" *ngIf="!isScreenphone">
            <p>
              Nous avons trouvé
              <strong class="text-brand">{{ ads.length }}</strong>
              annonces favorites pour vous !
            </p>
          </div>
          <div class="sort-by-product-area" *ngIf="!isScreenphone">
            <div class="sort-by-cover mr-10">
              <div class="sort-by-product-wrap">
                <div class="sort-by">
                  <span><i class="fi-rs-apps"></i>Afficher :</span>
                </div>
                <div class="sort-by-dropdown-wrap">
                  <span
                    >{{ adsPerPage }} <i class="fi-rs-angle-small-down"></i
                  ></span>
                </div>
              </div>
              <div class="sort-by-dropdown">
                <ul>
                  <li>
                    <a
                      [class.active]="adsPerPage === 10"
                      (click)="changeAdsPerPage(10)"
                      >10</a
                    >
                  </li>
                  <li>
                    <a
                      [class.active]="adsPerPage === 20"
                      (click)="changeAdsPerPage(20)"
                      >20</a
                    >
                  </li>
                  <li>
                    <a
                      [class.active]="adsPerPage === 50"
                      (click)="changeAdsPerPage(50)"
                      >50</a
                    >
                  </li>
                  <li>
                    <a
                      [class.active]="adsPerPage === filteredAds.length"
                      (click)="changeAdsPerPage(filteredAds.length)"
                      >Tout</a
                    >
                  </li>
                </ul>
              </div>
            </div>
            <div class="sort-by-cover mr-10">
              <div class="sort-by-product-wrap">
                <div class="sort-by">
                  <span><i class="fi-rs-apps-sort"></i>Trier par :</span>
                </div>
                <div class="sort-by-dropdown-wrap">
                  <span
                    >{{ getSortOptionLabel(sortOption) }}
                    <i class="fi-rs-angle-small-down"></i
                  ></span>
                </div>
              </div>
              <div class="sort-by-dropdown">
                <ul>
                  <li>
                    <a
                      [class.active]="sortOption === 'featured'"
                      (click)="changeSortOption('featured')"
                      >Mis en avant</a
                    >
                  </li>
                  <li>
                    <a
                      [class.active]="sortOption === 'priceLowToHigh'"
                      (click)="changeSortOption('priceLowToHigh')"
                      >Prix : croissant</a
                    >
                  </li>
                  <li>
                    <a
                      [class.active]="sortOption === 'priceHighToLow'"
                      (click)="changeSortOption('priceHighToLow')"
                      >Prix : décroissant</a
                    >
                  </li>
                  <li>
                    <a
                      [class.active]="sortOption === 'releaseDate'"
                      (click)="changeSortOption('releaseDate')"
                      >Date de sortie</a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="sort-by-product-area" style="" *ngIf="isScreenphone">
            <div class="sort-by-cover" class="width:max-content">
              <div class="sort-by-product-wrap">
                <div class="sort-by">
                  <span><i class="fi-rs-apps-sort"></i>Trier par :</span>
                </div>
                <div class="sort-by-dropdown-wrap">
                  <span
                    >{{ getSortOptionLabel(sortOption) }}
                    <i class="fi-rs-angle-small-down"></i
                  ></span>
                </div>
              </div>
              <div class="sort-by-dropdown">
                <ul>
                  <li>
                    <a
                      [class.active]="sortOption === 'featured'"
                      (click)="changeSortOption('featured')"
                      >Mis en avant</a
                    >
                  </li>
                  <li>
                    <a
                      [class.active]="sortOption === 'priceLowToHigh'"
                      (click)="changeSortOption('priceLowToHigh')"
                      >Prix : croissant</a
                    >
                  </li>
                  <li>
                    <a
                      [class.active]="sortOption === 'priceHighToLow'"
                      (click)="changeSortOption('priceHighToLow')"
                      >Prix : décroissant</a
                    >
                  </li>
                  <li>
                    <a
                      [class.active]="sortOption === 'releaseDate'"
                      (click)="changeSortOption('releaseDate')"
                      >Date de sortie</a
                    >
                  </li>
                </ul>
              </div>
            </div>

            <!--             
            <button
              style="
                max-width: 44px;
                width: 100%;
                height: 44px;
                padding: 8px;
                border-radius: 50%;
                background-color: rgb(46, 107, 255);
                display: flex;
                align-items: center;
                background: #fff;
                border: 1px solid #f7f8f9;
                color: #777;
                padding: 8px 13px;
                border-radius: 10px;
                transition: all 0.3s ease 0s;
                cursor: pointer;
                border: 1px solid #ececec;
                margin-left: 1rem;
              "
              class="filter-drawer-button"
              (click)="mobileHeaderActive()"
            >
              <i style="color: #777" class="fi fi-rs-settings-sliders"></i>
            </button> -->
          </div>

          <div class="totall-product mt-20" *ngIf="isScreenphone">
            <p>
              Nous avons trouvé
              <strong class="text-brand">{{ ads.length }}</strong>
              annonces pour vous !
            </p>
          </div>
        </div>
        <div class="col-lg-4-5">
          <div class="row">
            <div
              [ngClass]="{
                'col-lg-2 col-md-6 col-6': isScreenphone,
                'col-lg-2 col-md-6 col-12': !isScreenphone
              }"
              *ngFor="let ad of ads"
            >
              <div
                class="product-cart-wrap mb-30 wow animate__animated animate__fadeIn"
              >
                <div
                  class="product-img-action-wrap"
                  style="padding: 25px 25px 0 25px !important"
                >
                  <div
                    class="product-img product-img-zoom"
                    style="height: 240px"
                  >
                    <a [href]="'/ads/' + ad.id" style="height: 100%">
                      <img
                        class="default-img"
                        [src]="ad.medias[0]?.url"
                        alt=""
                      />
                      <img
                        class="hover-img"
                        [src]="ad.medias[1]?.url || ad.medias[0]?.url"
                        alt=""
                        style="height: 100%"
                      />
                    </a>
                  </div>
                  <div class="product-action-1">
                    <a
                      aria-label="Supprimer de la liste de souhaits"
                      class="action-btn"
                      (click)="removeFromFavoris(ad)"
                    >
                      <i class="fi-rs-trash"></i>
                    </a>
                  </div>
                </div>
                <div class="product-content-wrap">
                  <div class="product-category" style="margin-top: 1rem">
                    <a
                      [href]="
                        '/ads-category/' +
                        ad.category?.id +
                        '/' +
                        ad.category?.slug
                      "
                      >{{ ad.category.name }}</a
                    >
                  </div>
                  <h2>
                    <a [href]="'/ads/' + ad.id">
                      {{ ad.title | slice : 0 : 17
                      }}{{ ad.title.length > 17 ? "..." : "" }}
                    </a>
                  </h2>
                  <div class="product-rate-cover">
                    <div
                      class=""
                      style="
                        width: 100%;
                        font-weight: 800;
                        font-size: medium;
                        color: black;
                      "
                    >
                      {{ ad.price }} DH
                    </div>
                  </div>
                  <div>
                    <span class="font-small text-muted">
                      {{ getRelativeTime(ad.created_at) }}
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <ng-template #noAds>
          <p>Aucune annonce trouvée pour cette catégorie.</p>
        </ng-template>

        <!-- Updated Pagination Grid -->
        <div class="pagination-area mt-30 mb-50" *ngIf="totalPages > 1">
          <nav aria-label="Pagination">
            <ul class="pagination justify-content-start">
              <!-- Previous Button -->
              <li class="page-item" [ngClass]="{ disabled: currentPage === 1 }">
                <a
                  class="page-link"
                  (click)="changePage(currentPage - 1)"
                  aria-label="Précédent"
                >
                  <span aria-hidden="true">&laquo;</span>
                </a>
              </li>

              <!-- First Page Button -->
              <li class="page-item" [ngClass]="{ disabled: currentPage === 1 }">
                <a
                  class="page-link"
                  (click)="changePage(1)"
                  aria-label="Première"
                  style="width: auto"
                >
                  Première
                </a>
              </li>

              <!-- Ellipsis for Initial Page Range -->
              <li *ngIf="shouldShowEllipsesBefore()" class="page-item disabled">
                <span class="page-link">...</span>
              </li>

              <!-- Page Number Buttons -->
              <li
                *ngFor="let page of getVisiblePages()"
                class="page-item"
                [ngClass]="{ active: currentPage === page }"
              >
                <a class="page-link" (click)="changePage(page)">{{ page }}</a>
              </li>

              <!-- Ellipsis for Ending Page Range -->
              <li *ngIf="shouldShowEllipsesAfter()" class="page-item disabled">
                <span class="page-link">...</span>
              </li>

              <!-- Last Page Button -->
              <li
                class="page-item"
                [ngClass]="{ disabled: currentPage === totalPages }"
              >
                <a
                  class="page-link"
                  (click)="changePage(totalPages)"
                  aria-label="Dernière"
                  style="width: auto"
                >
                  Dernière
                </a>
              </li>

              <!-- Next Button -->
              <li
                class="page-item"
                [ngClass]="{ disabled: currentPage === totalPages }"
              >
                <a
                  class="page-link"
                  (click)="changePage(currentPage + 1)"
                  aria-label="Suivant"
                >
                  <span aria-hidden="true">&raquo;</span>
                </a>
              </li>
            </ul>
          </nav>
        </div>

        <!--End Deals-->
      </div>
    </div>
  </div>
</main>

<app-footer></app-footer>

<app-preloader></app-preloader>
