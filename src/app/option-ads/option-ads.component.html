<app-header></app-header>
<main class="main pages">
  <div class="page-header breadcrumb-wrap">
    <div class="container">
      <div class="breadcrumb">
        <a href="/" rel="nofollow"><i class="fi-rs-home mr-5"></i>Accueil</a>
        <span></span> Pages <span></span> Mon compte
      </div>
    </div>
  </div>

  <div class="container mb-80 mt-50">
    <a
      href="/page-account#orders"
      class="btn btn-fill-out btn-block mb-30"
      style="
        background: linear-gradient(45deg, #6b7280, #6b7280);
        width: auto;
        margin-bottom: 1rem;
      "
      ><i class="fi-rs-sign-in ml-15"></i> Retourner</a
    >
    <div class="row">
      <div class="col-lg-8 mb-40">
        <h2 class="heading-2 mb-10">
          Veuillez choisir un pack et la durée ci-dessous !
        </h2>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-8">
        <!--         <div class="table-responsive shopping-summery">
          <table class="table table-wishlist">
            <thead>
              <tr class="main-heading">
                <th class="custome-checkbox start pl-30">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    name="checkbox"
                    id="exampleCheckbox11"
                    value=""
                  />
                  <label
                    class="form-check-label"
                    for="exampleCheckbox11"
                  ></label>
                </th>
                <th scope="col" colspan="2">Product</th>
                <th scope="col">Unit Price</th>
                <th scope="col">Quantity</th>
                <th scope="col">Subtotal</th>
                <th scope="col" class="end">Remove</th>
              </tr>
            </thead>
            <tbody>
              <tr class="pt-30">
                <td class="custome-checkbox pl-30">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    name="checkbox"
                    id="exampleCheckbox1"
                    value=""
                  />
                  <label
                    class="form-check-label"
                    for="exampleCheckbox1"
                  ></label>
                </td>
                <td class="image product-thumbnail pt-40">
                  <img src="assets/imgs/shop/product-1-1.jpg" alt="#" />
                </td>
                <td class="product-des product-name">
                  <h6 class="mb-5">
                    <a
                      class="product-name mb-10 text-heading"
                      href="/shop-product-right"
                      >Field Roast Chao Cheese Creamy Original</a
                    >
                  </h6>
                  <div class="product-rate-cover">
                    <div class="product-rate d-inline-block">
                      <div class="product-rating" style="width: 90%"></div>
                    </div>
                    <span class="font-small ml-5 text-muted"> (4.0)</span>
                  </div>
                </td>
                <td class="price" data-title="Price">
                  <h4 class="text-body">$2.51</h4>
                </td>
                <td class="text-center detail-info" data-title="Stock">
                  <div class="detail-extralink mr-15">
                    <div class="detail-qty border radius">
                      <a href="#" class="qty-down"
                        ><i class="fi-rs-angle-small-down"></i
                      ></a>
                      <input
                        type="text"
                        name="quantity"
                        class="qty-val"
                        value="1"
                        min="1"
                      />
                      <a href="#" class="qty-up"
                        ><i class="fi-rs-angle-small-up"></i
                      ></a>
                    </div>
                  </div>
                </td>
                <td class="price" data-title="Price">
                  <h4 class="text-brand">$2.51</h4>
                </td>
                <td class="action text-center" data-title="Remove">
                  <a href="#" class="text-body"><i class="fi-rs-trash"></i></a>
                </td>
              </tr>
              <tr>
                <td class="custome-checkbox pl-30">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    name="checkbox"
                    id="exampleCheckbox2"
                    value=""
                  />
                  <label
                    class="form-check-label"
                    for="exampleCheckbox2"
                  ></label>
                </td>
                <td class="image product-thumbnail">
                  <img src="assets/imgs/shop/product-2-1.jpg" alt="#" />
                </td>
                <td class="product-des product-name">
                  <h6 class="mb-5">
                    <a
                      class="product-name mb-10 text-heading"
                      href="/shop-product-right"
                      >Blue Diamond Almonds Lightly Salted</a
                    >
                  </h6>
                  <div class="product-rate-cover">
                    <div class="product-rate d-inline-block">
                      <div class="product-rating" style="width: 90%"></div>
                    </div>
                    <span class="font-small ml-5 text-muted"> (4.0)</span>
                  </div>
                </td>
                <td class="price" data-title="Price">
                  <h4 class="text-body">$3.2</h4>
                </td>
                <td class="text-center detail-info" data-title="Stock">
                  <div class="detail-extralink mr-15">
                    <div class="detail-qty border radius">
                      <a href="#" class="qty-down"
                        ><i class="fi-rs-angle-small-down"></i
                      ></a>
                      <input
                        type="text"
                        name="quantity"
                        class="qty-val"
                        value="1"
                        min="1"
                      />
                      <a href="#" class="qty-up"
                        ><i class="fi-rs-angle-small-up"></i
                      ></a>
                    </div>
                  </div>
                </td>
                <td class="price" data-title="Price">
                  <h4 class="text-brand">$3.2</h4>
                </td>
                <td class="action text-center" data-title="Remove">
                  <a href="#" class="text-body"><i class="fi-rs-trash"></i></a>
                </td>
              </tr>
              <tr>
                <td class="custome-checkbox pl-30">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    name="checkbox"
                    id="exampleCheckbox3"
                    value=""
                  />
                  <label
                    class="form-check-label"
                    for="exampleCheckbox3"
                  ></label>
                </td>
                <td class="image product-thumbnail">
                  <img src="assets/imgs/shop/product-3-1.jpg" alt="#" />
                </td>
                <td class="product-des product-name">
                  <h6 class="mb-5">
                    <a
                      class="product-name mb-10 text-heading"
                      href="/shop-product-right"
                      >Fresh Organic Mustard Leaves Bell Pepper</a
                    >
                  </h6>
                  <div class="product-rate-cover">
                    <div class="product-rate d-inline-block">
                      <div class="product-rating" style="width: 90%"></div>
                    </div>
                    <span class="font-small ml-5 text-muted"> (4.0)</span>
                  </div>
                </td>
                <td class="price" data-title="Price">
                  <h4 class="text-body">$2.43</h4>
                </td>
                <td class="text-center detail-info" data-title="Stock">
                  <div class="detail-extralink mr-15">
                    <div class="detail-qty border radius">
                      <a href="#" class="qty-down"
                        ><i class="fi-rs-angle-small-down"></i
                      ></a>
                      <input
                        type="text"
                        name="quantity"
                        class="qty-val"
                        value="1"
                        min="1"
                      />
                      <a href="#" class="qty-up"
                        ><i class="fi-rs-angle-small-up"></i
                      ></a>
                    </div>
                  </div>
                </td>
                <td class="price" data-title="Price">
                  <h4 class="text-brand">$2.43</h4>
                </td>
                <td class="action text-center" data-title="Remove">
                  <a href="#" class="text-body"><i class="fi-rs-trash"></i></a>
                </td>
              </tr>
            </tbody>
          </table>
        </div> -->

        <div class="flex flex-column">
          <div
            class="border-2 border-dashed surface-border border-round surface-ground flex-auto flex justify-content-center align-items-center font-medium"
          >
            <div class="container" style="padding: 2rem">
              <div class="container">
                <div class="row">
                  <!-- First Column: Remonter mon annonce - Stacked on mobile -->
                  <div class="form-group col-md-8">
                    <div class="payment-method p-3 border rounded shadow-sm">
                      <h4 class="mb-3">Remonter mon annonce :</h4>

                      <!-- Loop through paidOptions array -->
                      <div *ngFor="let option of paidOptions" class="mb-3">
                        <input
                          id="{{ 'pm' + option?.id }}"
                          type="radio"
                          name="payment-method"
                          [value]="option?.id"
                          [(ngModel)]="selectedPaidOptionId"
                          (change)="onPaidOptionChange(option?.id, option)"
                          class="form-check-input"
                        />
                        <label
                          class="pm-label d-flex justify-content-between align-items-center border rounded p-3"
                          [ngClass]="{
                            checked: selectedPaidOptionId === option?.id
                          }"
                          [for]="'pm' + option?.id"
                          style="cursor: pointer"
                        >
                          <div class="pm-text">
                            <h5>{{ option?.name }}</h5>
                            <p class="mb-0 text-muted">
                              {{ option?.description }}
                            </p>
                          </div>
                          <div class="pm-price text-right">
                            <p
                              class="price mb-0"
                              style="font-size: 1.5rem; font-weight: 600"
                            >
                              {{ option?.price }} DH
                            </p>
                            <small class="text-muted"
                              >{{ option?.duration }} jours</small
                            >
                          </div>
                        </label>
                      </div>
                    </div>
                  </div>

                  <!-- Second Column: Mettre en avant - Stacked below on mobile -->
                  <div class="form-group col-md-4">
                    <div class="payment-method p-3 border rounded shadow-sm">
                      <h4 class="mb-3">Mettre en avant :</h4>

                      <div *ngFor="let option of promoteOptions" class="py-2">
                        <div
                          class="first pl-2 d-flex py-2 align-items-center justify-content-between border rounded p-2"
                          [ngClass]="{
                            selected: option?.bool
                          }"
                          style="cursor: pointer"
                        >
                          <label
                            class="d-flex w-100 align-items-center"
                            [for]="'option' + option?.id"
                          >
                            <div class="form-check">
                              <p-checkbox
                                [inputId]="'option' + option?.id"
                                [(ngModel)]="option.bool"
                                [value]="option?.id"
                                [binary]="true"
                                name="payment-methods"
                                (onChange)="onOptionChange($event, option)"
                              ></p-checkbox>
                            </div>
                            <div class="pl-3" style="flex-grow: 1">
                              <span
                                class="option-name"
                                style="font-weight: 600"
                                >{{ option?.name }}</span
                              >
                            </div>
                            <div class="text-right">
                              <span class="font-weight-bold price"
                                >{{ option?.price }} DH</span
                              >
                            </div>
                          </label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div
                  *ngIf="fieldErrors.options"
                  class="text-danger requisDiv"
                  style="float: inline-end"
                >
                  <div>
                    Veuillez sélectionner au moins une option avant de
                    continuer.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-4">
        <div class="border p-md-4 cart-totals ml-30">
          <div class="table-responsive">
            <table class="table no-border">
              <tbody>
                <!-- Selected Paid Option -->
                <tr *ngIf="selectedPaidOptionId">
                  <td class="cart_total_label">
                    <h6 class="text-muted" style="color: #111827 !important">
                      {{ selectedPaidOption?.name }}
                    </h6>
                  </td>
                  <td class="cart_total_amount">
                    <h4 class="text-brand text-end">
                      {{ selectedPaidOption?.price }}
                      DH
                    </h4>
                  </td>
                </tr>

                <!-- Divider -->
                <tr>
                  <td colspan="2">
                    <div class="divider-2 mt-10 mb-10"></div>
                  </td>
                </tr>

                <!-- Selected Options -->
                <tr *ngFor="let option of selectedOptions">
                  <td class="cart_total_label">
                    <h6 class="text-muted" style="color: #111827 !important">
                      {{ option.name }}
                    </h6>
                  </td>
                  <td class="cart_total_amount">
                    <h4 class="text-brand text-end">{{ option.price }} DH</h4>
                  </td>
                </tr>

                <!-- Total -->
                <tr *ngIf="selectedOptions.length > 0">
                  <td colspan="2">
                    <div class="divider-2 mt-10 mb-10"></div>
                  </td>
                </tr>
                <tr>
                  <td class="cart_total_label">
                    <h6
                      class="text-muted"
                      style="
                        color: #111827 !important;
                        font-size: medium;
                        font-weight: 800;
                      "
                    >
                      Total
                    </h6>
                  </td>
                  <td class="cart_total_amount">
                    <h4 class="text-brand text-end" style="font-weight: 800">
                      {{
                        isValidNumber(totalPrice)
                          ? totalPrice.toFixed(2)
                          : "0.00"
                      }}
                      DH
                    </h4>
                  </td>
                </tr>
              </tbody>
            </table>

            <div class="login_footer form-group mb-3">
              <div class="chek-form">
                <div class="custome-checkbox">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    name="terms"
                    id="termsCheckbox"
                    [(ngModel)]="termsAccepted"
                    (ngModelChange)="clearError('termsAccepted')"
                  />
                  <label
                    class="form-check-label"
                    for="termsCheckbox"
                    style="font-size: small"
                    ><span>J'accepte les termes et conditions.</span></label
                  >
                </div>
              </div>
              <a style="font-size: small" href="/conditions_generales_de_ventes"
                ><i class="fi-rs-book-alt mr-2 text-muted"></i>En savoir plus</a
              >
            </div>
            <div
              class="text-danger requisDiv"
              style="margin-top: 1rem; margin-bottom: 1rem; font-size: small"
              *ngIf="fieldErrors.termsAccepted"
            >
              <div>
                Veuillez accepter les termes et conditions pour continuer.
              </div>
            </div>
          </div>
          <a (click)="payment()" class="btn mb-20 w-100">
            Passer le paiement
            <i class="fi-rs-sign-out ml-15"></i>
          </a>
        </div>
      </div>
    </div>
  </div>
</main>

<app-footer></app-footer>

<app-preloader></app-preloader>
