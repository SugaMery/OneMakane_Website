<app-header></app-header>
<main class="main pages">
  <div class="page-header breadcrumb-wrap">
    <div class="container">
      <div class="breadcrumb">
        <a href="/" rel="nofollow"><i class="fi-rs-home mr-5"></i>Accueil</a>
        <span></span> Pages <span></span> Mon Compte
      </div>
    </div>
  </div>

  <div class="page-content pt-50" style="transform: none">
    <div class="container" style="transform: none">
      <div class="row" style="transform: none">
        <div class="col-xl-10 col-lg-12 m-auto" style="transform: none">
          <div class="row" style="transform: none">
            <div class="col-lg-12">
              <div class="single-page pr-30 mb-lg-0 mb-sm-5">
                <div class="single-header style-2">
                  <h2>Ajouter une annonce</h2>
                </div>
                <div class="single-content mb-50">
                  <div class="card-body contact-from-area">
                    <p>
                      Pour ajouter votre annonce, veuillez remplir le formulaire
                      ci-dessous et cliquer sur le bouton "Ajouter".
                    </p>
                    <div class="row">
                      <form class="" action="#" method="post">
                        <p-stepper
                          [linear]="isLinear()"
                          [orientation]="isPhone() ? 'vertical' : 'horizontal'"
                        >
                          <p-stepperPanel header="Informations de base">
                            <ng-template
                              pTemplate="content"
                              let-nextCallback="nextCallback"
                              let-index="index"
                            >
                              <div class="flex flex-column">
                                <div
                                  class="border-2 border-dashed surface-border border-round surface-ground flex-auto flex justify-content-center align-items-center font-medium"
                                >
                                  <div
                                    class="container"
                                    style="padding: 2rem 2rem 2rem 2rem"
                                  >
                                    <h5 class="section-title style-1 mb-30">
                                      Commençons par l'essentiel !
                                    </h5>

                                    <!-- Champ de titre -->
                                    <div class="input-style mb-20">
                                      <label
                                        >Quel est le titre de l'annonce ?
                                      </label>
                                      <input
                                        id="titre"
                                        name="titre"
                                        [(ngModel)]="formData.titre"
                                        (ngModelChange)="onTitleChange($event)"
                                        placeholder="Titre de votre annonce"
                                        type="text"
                                        required
                                        maxlength="50"
                                      />
                                      <div
                                        *ngIf="fieldErrors.titre"
                                        class="text-danger requisDiv"
                                      >
                                        <div>Titre est requis.</div>
                                      </div>
                                      <div
                                        class="text-infos requisDiv"
                                        *ngIf="
                                          formData.titre &&
                                          formData.titre.length >= 45
                                        "
                                      >
                                        <div>
                                          Le titre est proche de la longueur
                                          maximale.
                                        </div>
                                      </div>
                                    </div>

                                    <!-- Liste des catégories suggérées -->
                                    <div *ngIf="isBakingMaterialChecked">
                                      <!-- Votre chatbox pour la catégorie des ustensiles de cuisine -->
                                    </div>
                                    <div
                                      *ngIf="suggestedCategoryIf"
                                      class="theiaStickySidebar"
                                      style="
                                        padding-top: 0px;
                                        padding-bottom: 1px;
                                        position: static;
                                        transform: none;
                                      "
                                    >
                                      <div
                                        class="sidebar-widget widget-category-2 mb-30"
                                      >
                                        <label *ngIf="suggestedsubcategoryIf"
                                          >Choisir une catégorie suggérée</label
                                        >

                                        <ul *ngIf="suggestedsubcategoryIf">
                                          <!-- Affichage de la catégorie suggérée -->

                                          <div *ngIf="isBakingMaterialChecked">
                                            <!-- Votre chatbox pour la catégorie des ustensiles de cuisine -->
                                          </div>

                                          <!-- Liste des éléments -->
                                          <li
                                            *ngFor="
                                              let subcategory of suggestedCategory!
                                                .subcategories
                                            "
                                            class="suggestedbackground"
                                          >
                                            <ng-container>
                                              <span
                                                class="d-inline-flex align-items-center"
                                              >
                                                <!-- Chatbox -->
                                                <div class="custome-checkbox">
                                                  <input
                                                    class="form-check-input"
                                                    type="checkbox"
                                                    id="{{
                                                      subcategory.name
                                                    }}Checkbox"
                                                    [checked]="
                                                      selectedSubCategory ===
                                                      subcategory
                                                    "
                                                    (change)="
                                                      selectSubCategory(
                                                        subcategory
                                                      )
                                                    "
                                                  />
                                                  <label
                                                    class="form-check-label"
                                                    for="{{
                                                      subcategory.name
                                                    }}Checkbox"
                                                  ></label>
                                                </div>
                                                <!-- Lien -->
                                                <a class="ml-2">
                                                  <img
                                                    src="{{
                                                      suggestedCategory!
                                                        .icon_path
                                                    }}"
                                                    alt=""
                                                  />{{
                                                    suggestedCategory!.name
                                                  }}

                                                  <!-- Pour chaque sous-catégorie de la catégorie suggérée -->
                                                  <ng-container
                                                    *ngIf="
                                                      subcategory.keywords &&
                                                      subcategory.keywords
                                                        .length > 0
                                                    "
                                                  >
                                                    <!-- Afficher le lien vers la sous-catégorie -->
                                                    <a class="page-link">
                                                      <i
                                                        class="fi-rs-angle-right"
                                                        style="
                                                          padding-left: 1rem;
                                                          padding-right: 1rem;
                                                        "
                                                      ></i>
                                                      {{ subcategory.name }}
                                                    </a>
                                                  </ng-container>
                                                </a>
                                              </span>
                                            </ng-container>
                                          </li>
                                        </ul>
                                      </div>
                                      <div class="row">
                                        <div class="form-group col-md-12">
                                          <label
                                            >Ou choisissez une autre Catégorie
                                          </label>
                                          <div class="select-menu">
                                            <div
                                              class="select-btn"
                                              style="
                                                margin-bottom: 1rem;
                                                background: #fff;
                                                border: 1px solid #ececec;
                                                height: 64px;
                                                box-shadow: none;
                                                padding-left: 20px;
                                                font-size: 16px;
                                                width: 100%;
                                              "
                                              (click)="toggleOptions()"
                                            >
                                              <span class="sBtn-text">
                                                <div
                                                  style="
                                                    display: flex;
                                                    align-items: center;
                                                  "
                                                >
                                                  <img
                                                    src="{{
                                                      selectedOption
                                                        .parentCategoy?.media
                                                        ?.url
                                                    }}"
                                                    *ngIf="selectedOption.name"
                                                    alt=""
                                                    class="iconUrl"
                                                    style="
                                                      max-width: 8%;
                                                      margin-right: 1rem;
                                                    "
                                                  />
                                                  <p style="margin: 0">
                                                    {{
                                                      selectedOption
                                                        .parentCategoy?.name ||
                                                        "Choisissez"
                                                    }}
                                                    <i
                                                      class="fi-rs-angle-right"
                                                      *ngIf="
                                                        selectedOption.name
                                                      "
                                                      style="
                                                        padding-left: 1rem;
                                                        padding-right: 0.5rem;
                                                        font-size: 15px;
                                                      "
                                                    ></i>
                                                    {{ selectedOption.name }}
                                                  </p>
                                                </div>
                                              </span>
                                              <i class="bx bx-chevron-down"></i>
                                            </div>
                                            <ul
                                              class="options"
                                              [ngClass]="{
                                                active: optionsVisible
                                              }"
                                              style="font-size: smaller"
                                            >
                                              <li
                                                class="option"
                                                *ngFor="
                                                  let category of allcategories
                                                "
                                                (click)="selectOption(category)"
                                              >
                                                <span
                                                  class="d-inline-flex align-items-center"
                                                >
                                                  <img
                                                    src="{{
                                                      category.parentCategoy
                                                        ?.media?.url
                                                    }}"
                                                    alt=""
                                                    class="iconUrl"
                                                    style="
                                                      max-width: 3%;
                                                      margin-right: 1rem;
                                                    "
                                                  />
                                                  {{
                                                    category?.parentCategoy
                                                      ?.name
                                                  }}
                                                  <i
                                                    class="fi-rs-angle-right"
                                                    style="
                                                      padding-left: 1rem;
                                                      padding-right: 0.5rem;
                                                      font-size: 15px;
                                                    "
                                                  ></i>
                                                  {{ category.name }}
                                                </span>
                                              </li>
                                            </ul>
                                          </div>
                                          <div
                                            *ngIf="fieldErrors.category"
                                            class="text-danger requisDiv"
                                          >
                                            <div>Catégorie est requise.</div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>

                              <div class="flex pt-4 justify-content-end">
                                <p-button
                                  label="Suivant"
                                  icon="pi pi-arrow-right"
                                  iconPos="right"
                                  (onClick)="
                                    emitNextCallbackTitre()
                                      ? nextCallback.emit()
                                      : null
                                  "
                                ></p-button>
                              </div>
                            </ng-template>
                          </p-stepperPanel>

                          <p-stepperPanel header="Informations complémentaires">
                            <ng-template
                              pTemplate="content"
                              let-prevCallback="prevCallback"
                              let-nextCallback="nextCallback"
                              let-index="index"
                            >
                              <div class="flex flex-column">
                                <div
                                  class="border-2 border-dashed surface-border border-round surface-ground flex-auto flex justify-content-center align-items-center font-medium"
                                >
                                  <div
                                    class="container"
                                    style="padding: 2rem 2rem 2rem 2rem"
                                  >
                                    <h5 class="section-title style-1 mb-30">
                                      Dites-nous en plus
                                    </h5>

                                    <!-- Champ de titre -->

                                    <!-- Liste des catégories suggérées -->

                                    <div
                                      class="theiaStickySidebar"
                                      style="
                                        padding-top: 0px;
                                        padding-bottom: 1px;
                                        position: static;
                                        transform: none;
                                      "
                                    >
                                      <div class="row">
                                        <div
                                          class="form-group col-md-12"
                                          *ngFor="let setting of settings"
                                        >
                                          <div class="select-menu">
                                            <label>{{ setting.label }}</label>

                                            <!-- Display Select Button -->
                                            <div
                                              *ngIf="setting.type === 'select'"
                                              class="select-btn"
                                              style="
                                                margin-bottom: 1rem;
                                                background: #fff;
                                                border: 1px solid #ececec;
                                                height: 55px;
                                                box-shadow: none;
                                                padding-left: 20px;
                                                font-size: 15px;
                                                width: 100%;
                                              "
                                              (click)="toggledOptions(setting)"
                                            >
                                              <span class="sBtn-text">
                                                <div
                                                  style="
                                                    display: flex;
                                                    align-items: center;
                                                  "
                                                >
                                                  {{
                                                    setting.selectedOption
                                                      ? setting.selectedOption
                                                          .label
                                                      : "Choisissez"
                                                  }}
                                                </div>
                                              </span>
                                              <i class="bx bx-chevron-down"></i>
                                            </div>

                                            <!-- Display Select Options -->
                                            <ul
                                              *ngIf="setting.type === 'select'"
                                              class="options"
                                              [class.active]="
                                                setting.optionsVisible
                                              "
                                              style="font-size: smaller"
                                            >
                                              <li
                                                class="option"
                                                *ngFor="
                                                  let option of parseOptions(
                                                    setting.content
                                                  )
                                                "
                                                [value]="option.value"
                                                (click)="
                                                  selectdOptiond(
                                                    option,
                                                    setting
                                                  )
                                                "
                                              >
                                                <span
                                                  class="d-inline-flex align-items-center"
                                                  >{{ option.label }}</span
                                                >
                                              </li>
                                            </ul>

                                            <div
                                              *ngIf="setting.type === 'options'"
                                              class="select-btn"
                                              style="
                                                margin-bottom: 1rem;
                                                background: #fff;
                                                border: 1px solid #ececec;
                                                height: 55px;
                                                box-shadow: none;
                                                padding-left: 20px;
                                                font-size: 15px;
                                                width: 100%;
                                              "
                                              (click)="toggledOptions(setting)"
                                            >
                                              <span class="sBtn-text">
                                                <div
                                                  style="
                                                    display: flex;
                                                    align-items: center;
                                                  "
                                                >
                                                  {{
                                                    setting.selectedOption
                                                      ? setting.selectedOption
                                                          .label
                                                      : "Choisissez"
                                                  }}
                                                </div>
                                              </span>
                                              <i class="bx bx-chevron-down"></i>
                                            </div>
                                            <div
                                              *ngIf="setting.type === 'bool'"
                                              class="payment_option"
                                            >
                                              <div
                                                class="custome-radio d-inline-flex align-items-center"
                                                style="margin-right: 2rem"
                                              >
                                                <input
                                                  class="form-check-input"
                                                  type="radio"
                                                  name="{{ setting.name }}"
                                                  id="{{ setting.name }}Yes"
                                                  value="yes"
                                                  [checked]="
                                                    setting.content === 'yes'
                                                  "
                                                  (change)="
                                                    updateSetting(
                                                      setting,
                                                      'yes'
                                                    )
                                                  "
                                                />
                                                <label
                                                  class="form-check-label"
                                                  for="{{ setting.name }}Yes"
                                                  >Oui</label
                                                >
                                              </div>
                                              <div
                                                class="custome-radio d-inline-flex align-items-center"
                                              >
                                                <input
                                                  class="form-check-input"
                                                  type="radio"
                                                  name="{{ setting.name }}"
                                                  id="{{ setting.name }}No"
                                                  value="no"
                                                  [checked]="
                                                    setting.content === 'no'
                                                  "
                                                  (change)="
                                                    updateSetting(setting, 'no')
                                                  "
                                                />
                                                <label
                                                  class="form-check-label"
                                                  for="{{ setting.name }}No"
                                                  >Non
                                                </label>
                                              </div>
                                            </div>

                                            <div
                                              *ngIf="setting.type === 'radio'"
                                              class="payment_option"
                                            >
                                              <div
                                                class="custom-radio d-inline-flex align-items-center"
                                                style="margin-right: 2rem"
                                              >
                                                <input
                                                  class="form-check-input"
                                                  type="radio"
                                                  name="{{ setting.name }}"
                                                  id="{{ setting.name }}Yes"
                                                  [value]="setting.content"
                                                  [checked]="
                                                    setting.content === 'yes'
                                                  "
                                                />
                                                <label
                                                  class="form-check-label"
                                                  for="{{ setting.name }}Yes"
                                                  >{{ setting.label }}</label
                                                >
                                              </div>
                                            </div>
                                            <!-- Display Select Options -->
                                            <ul
                                              *ngIf="setting.type === 'options'"
                                              class="options"
                                              [class.active]="
                                                setting.optionsVisible
                                              "
                                              style="font-size: smaller"
                                            >
                                              <li
                                                class="option"
                                                *ngFor="
                                                  let option of parseOptions(
                                                    setting.content
                                                  )
                                                "
                                                [value]="option.value"
                                                (click)="
                                                  selectdOptiond(
                                                    option,
                                                    setting
                                                  )
                                                "
                                              >
                                                <span
                                                  class="d-inline-flex align-items-center"
                                                  >{{ option.label }}</span
                                                >
                                              </li>
                                            </ul>

                                            <!-- Display Table -->
                                            <div
                                              *ngIf="setting.type === 'table'"
                                              class="select-btn"
                                              style="
                                                margin-bottom: 1rem;
                                                background: #fff;
                                                border: 1px solid #ececec;
                                                height: 55px;
                                                box-shadow: none;
                                                padding-left: 20px;
                                                font-size: 15px;
                                                width: 100%;
                                              "
                                              (click)="toggledOptions(setting)"
                                            >
                                              <span class="sBtn-text">
                                                <div
                                                  style="
                                                    display: flex;
                                                    align-items: center;
                                                  "
                                                >
                                                  {{
                                                    setting.selectedOption
                                                      ? setting.selectedOption
                                                          .name
                                                      : "Choisissez"
                                                  }}
                                                </div>
                                              </span>
                                              <i class="bx bx-chevron-down"></i>
                                            </div>

                                            <!-- Display Select Options -->
                                            <ul
                                              *ngIf="setting.type === 'table'"
                                              class="options"
                                              [class.active]="
                                                setting.optionsVisible
                                              "
                                              style="font-size: smaller"
                                            >
                                              <div
                                                *ngFor="
                                                  let optioned of parseOptions2(
                                                    setting.content
                                                  )
                                                "
                                              >
                                                {{ optioned.label }}
                                                <li
                                                  class="option"
                                                  *ngFor="
                                                    let option of parseOptions1(
                                                      optioned.content
                                                    )
                                                  "
                                                  [value]="option.id"
                                                  (click)="
                                                    selectdOptiond(
                                                      option,
                                                      setting
                                                    )
                                                  "
                                                >
                                                  <span
                                                    class="d-inline-flex align-items-center"
                                                    >{{ option.name }}</span
                                                  >
                                                </li>
                                              </div>
                                            </ul>
                                            <!-- Display Date Input for 'date' type -->
                                            <div
                                              *ngIf="setting.type === 'date'"
                                              style="margin-bottom: 1rem"
                                            >
                                              <p-calendar
                                                [(ngModel)]="date"
                                                [iconDisplay]="'input'"
                                                [showIcon]="true"
                                                placeholder="{{
                                                  setting.label
                                                }}"
                                                inputId="icondisplay"
                                                class="full-width-calendar"
                                                [style]="{ width: '100%' }"
                                              ></p-calendar>
                                            </div>

                                            <div
                                              *ngIf="setting.type === 'text'"
                                              style="margin-bottom: 1rem"
                                            >
                                              <input
                                                id="titre"
                                                name="titre"
                                                [(ngModel)]="setting.content"
                                                placeholder="{{
                                                  setting.label
                                                }}"
                                                type="text"
                                                required
                                                maxlength="50"
                                              />
                                            </div>
                                            <div
                                              *ngIf="setting.type === 'number'"
                                              style="margin-bottom: 1rem"
                                            >
                                              <input
                                                id="titre"
                                                name="titre"
                                                [(ngModel)]="setting.content"
                                                placeholder="{{
                                                  setting.label
                                                }}"
                                                type="number"
                                                required
                                                maxlength="50"
                                              />
                                            </div>

                                            <!-- Display Select Button -->
                                            <!-- Display Select Button -->
                                            <div
                                              *ngIf="
                                                setting.type === 'multiple'
                                              "
                                              class="select-btn"
                                              style="
                                                margin-bottom: 1rem;
                                                background: #fff;
                                                border: 1px solid #ececec;
                                                height: 55px;
                                                box-shadow: none;
                                                padding-left: 20px;
                                                font-size: 15px;
                                                width: 100%;
                                              "
                                              (click)="toggleOptionsGO(setting)"
                                            >
                                              <span class="sBtn-text">
                                                <div
                                                  style="
                                                    display: flex;
                                                    align-items: center;
                                                  "
                                                >
                                                  {{
                                                    setting.selectedOptions
                                                      .length > 0
                                                      ? getSelectedLabels(
                                                          setting
                                                        )
                                                      : "Choisissez"
                                                  }}
                                                </div>
                                              </span>
                                              <i class="bx bx-chevron-down"></i>
                                            </div>

                                            <!-- Display Select Options -->
                                            <ul
                                              *ngIf="
                                                setting.type === 'multiple'
                                              "
                                              class="options"
                                              [class.active]="
                                                setting.optionsVisible
                                              "
                                              style="font-size: smaller"
                                            >
                                              <li
                                                class="option"
                                                *ngFor="
                                                  let option of parseOptions(
                                                    setting.content
                                                  )
                                                "
                                                [class.selected]="
                                                  isOptionSelected(
                                                    option,
                                                    setting
                                                  )
                                                "
                                                (click)="
                                                  selectOptionGO(
                                                    option,
                                                    setting
                                                  )
                                                "
                                              >
                                                <div class="checkbox-container">
                                                  <input
                                                    class="checkbox"
                                                    type="checkbox"
                                                    id="{{ option.value }}"
                                                    name="{{ option.label }}"
                                                    [checked]="
                                                      isOptionSelected(
                                                        option,
                                                        setting
                                                      )
                                                    "
                                                    (change)="
                                                      toggleOption(
                                                        option,
                                                        setting
                                                      )
                                                    "
                                                  />
                                                  <label
                                                    for="{{ option.value }}"
                                                    >{{ option.label }}</label
                                                  >
                                                </div>
                                              </li>
                                            </ul>

                                            <div
                                              *ngIf="
                                                fieldsErrors[setting.label!]
                                              "
                                              class="text-danger requisDiv"
                                            >
                                              <div>
                                                {{
                                                  setting.label
                                                    ? setting.label +
                                                      " est requise."
                                                    : ""
                                                }}
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>

                              <div class="flex pt-4 justify-content-between">
                                <p-button
                                  label="Retour"
                                  icon="pi pi-arrow-left"
                                  (onClick)="prevCallback.emit()"
                                />
                                <p-button
                                  label="Suivant"
                                  icon="pi pi-arrow-right"
                                  iconPos="right"
                                  (onClick)="
                                    emitNextCallbackSetting()
                                      ? nextCallback.emit()
                                      : null
                                  "
                                ></p-button>
                              </div>
                            </ng-template>
                          </p-stepperPanel>

                          <p-stepperPanel header="Description de votre bien">
                            <ng-template
                              pTemplate="content"
                              let-nextCallback="nextCallback"
                              let-prevCallback="prevCallback"
                              let-index="index"
                            >
                              <div class="flex flex-column">
                                <div
                                  class="border-2 border-dashed surface-border border-round surface-ground flex-auto flex justify-content-center align-items-center font-medium"
                                >
                                  <div
                                    class="container"
                                    style="padding: 2rem 2rem 2rem 2rem"
                                  >
                                    <h5 class="section-title style-1 mb-30">
                                      Décrivez votre bien !
                                    </h5>

                                    <!-- Champ de titre -->
                                    <div class="input-style mb-20">
                                      <label>Titre de l'annonce </label>
                                      <input
                                        id="titre"
                                        name="titre"
                                        [(ngModel)]="formData.titre"
                                        (ngModelChange)="onTitleChange($event)"
                                        placeholder="Titre de votre annonce"
                                        type="text"
                                        required
                                        maxlength="50"
                                      />
                                      <div
                                        *ngIf="fieldErrors.titre"
                                        class="text-danger requisDiv"
                                      >
                                        <div>Titre est requis.</div>
                                      </div>
                                      <div
                                        class="text-infos requisDiv"
                                        *ngIf="
                                          formData.titre &&
                                          formData.titre.length >= 45
                                        "
                                      >
                                        <div>
                                          Le titre est proche de la longueur
                                          maximale.
                                        </div>
                                      </div>
                                    </div>

                                    <div class="input-style mb-20">
                                      <label>Description de l'annonce </label>
                                      <textarea
                                        id="description"
                                        name="description"
                                        (ngModelChange)="
                                          clearError('description')
                                        "
                                        [(ngModel)]="formData.description"
                                        required
                                        minlength="10"
                                      ></textarea>
                                      <div
                                        *ngIf="fieldErrors.description"
                                        class="text-danger requisDiv"
                                      >
                                        <div>Description est requise.</div>
                                      </div>
                                      <div
                                        class="text-infos requisDiv"
                                        *ngIf="
                                          formData.description &&
                                          formData.description.length <= 20
                                        "
                                      >
                                        <div>
                                          La description est assez courte.
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>

                              <div class="flex pt-4 justify-content-between">
                                <p-button
                                  label="Retour"
                                  icon="pi pi-arrow-left"
                                  (onClick)="prevCallback.emit()"
                                />
                                <p-button
                                  label="Suivant"
                                  icon="pi pi-arrow-right"
                                  iconPos="right"
                                  (onClick)="
                                    emitNextCallbackDescriprion()
                                      ? nextCallback.emit()
                                      : null
                                  "
                                ></p-button>
                              </div>
                            </ng-template>
                          </p-stepperPanel>

                          <p-stepperPanel header="Ajouter des Images">
                            <ng-template
                              pTemplate="content"
                              let-prevCallback="prevCallback"
                              let-nextCallback="nextCallback"
                              let-index="index"
                            >
                              <div class="flex flex-column">
                                <div
                                  class="border-2 border-dashed surface-border border-round surface-ground flex-auto flex justify-content-center align-items-center font-medium"
                                >
                                  <div class="container" style="padding: 1rem">
                                    <div
                                      class="bg-white p-5 rounded shadow-sm border"
                                    >
                                      <div class="dropzone d-block">
                                        <label
                                          for="files"
                                          class="dropzone-container"
                                        >
                                          <div class="file-icon">
                                            <i
                                              class="pi pi-plus-circle text-succes"
                                              style="color: #3bb77e"
                                            ></i>
                                          </div>
                                          <div class="text-center pt-3 px-5">
                                            <p
                                              class="w-80 h5 text-dark fw-bold"
                                            >
                                              Glissez vos photos ici pour
                                              commencer le téléchargement.
                                            </p>
                                            <div class="hr-sect">ou</div>
                                            <button
                                              class="btn btn-primary mb-2"
                                              (click)="fileInput.click()"
                                            >
                                              Parcourir les fichiers
                                            </button>
                                            <input
                                              #fileInput
                                              id="files"
                                              name="files[]"
                                              type="file"
                                              class="file-input"
                                              (change)="onFileSelected($event)"
                                              style="display: none"
                                              accept="image/*"
                                            />
                                          </div>
                                        </label>
                                      </div>
                                      <div
                                        *ngIf="uploadedImages.length > 0"
                                        class="mt-3"
                                      >
                                        <div
                                          class="inline-container"
                                          style="margin-bottom: 1rem"
                                        >
                                          <p class="fw-bold">
                                            Images téléchargées :
                                          </p>
                                          <p
                                            *ngIf="maxImages"
                                            class="fw-bold"
                                            style="color: #ff3737"
                                          >
                                            Vous ne pouvez télécharger que
                                            jusqu'à 3 images.
                                          </p>
                                        </div>

                                        <div class="row">
                                          <div
                                            class="col-md-3 mb-3"
                                            *ngFor="
                                              let image of uploadedImages;
                                              let i = index
                                            "
                                          >
                                            <div class="position-relative">
                                              <img
                                                [src]="image"
                                                alt="Image téléchargée"
                                                class="img-fluid"
                                                style="
                                                  border-top-left-radius: 10px;
                                                  border-top-right-radius: 10px;
                                                "
                                              />
                                              <div class="image-overlay">
                                                <button
                                                  class="btn btn-danger btn-sm position-absolute top-0 end-0 m-2"
                                                  (click)="deleteImage(i)"
                                                >
                                                  <i class="pi pi-trash"></i>
                                                </button>
                                                <button
                                                  class="btn btn-primary btn-modifier btn-sm position-absolute top-0 start-0 m-2"
                                                  (click)="replaceImage(i)"
                                                >
                                                  <i class="pi pi-pencil"></i>
                                                </button>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="flex pt-4 justify-content-between">
                                <p-button
                                  label="Retour"
                                  icon="pi pi-arrow-left"
                                  (onClick)="prevCallback.emit()"
                                />
                                <p-button
                                  label="Suivant"
                                  icon="pi pi-arrow-right"
                                  iconPos="right"
                                  (click)="nextCallback.emit()"
                                  [disabled]="
                                    uploadedImages.length < 1 ||
                                    uploadedImages.length > 3
                                  "
                                ></p-button>
                              </div>
                            </ng-template>
                          </p-stepperPanel>
                          <p-stepperPanel header="Détails de Localisation">
                            <ng-template
                              pTemplate="content"
                              let-prevCallback="prevCallback"
                              let-index="index"
                            >
                              <div class="flex flex-column">
                                <div
                                  class="border-2 border-dashed surface-border border-round surface-ground flex-auto flex justify-content-center align-items-center font-medium"
                                >
                                  <div class="container" style="padding: 2rem">
                                    <div class="row">
                                      <div class="form-group col-md-6">
                                        <label>Ville</label>
                                        <input
                                          name="ville"
                                          [(ngModel)]="formData.ville"
                                          (ngModelChange)="clearError('ville')"
                                          placeholder="Ville de l'annonce"
                                          type="text"
                                        />
                                        <div
                                          *ngIf="fieldErrors.ville"
                                          class="text-danger requisDiv"
                                        >
                                          <div>Ville est requise.</div>
                                        </div>
                                      </div>
                                      <div class="form-group col-md-6">
                                        <label>Code postal</label>
                                        <input
                                          name="code_postal"
                                          [(ngModel)]="formData.code_postal"
                                          (ngModelChange)="
                                            clearError('code_postal')
                                          "
                                          placeholder="Code postal de l'annonce"
                                          type="text"
                                        />
                                        <div
                                          *ngIf="fieldErrors.code_postal"
                                          class="text-danger requisDiv"
                                        >
                                          <div>Code postal est requis.</div>
                                        </div>
                                      </div>
                                    </div>
                                    <div
                                      class="row"
                                      style="margin-bottom: 2rem"
                                    >
                                      <div class="form-group col-md-12">
                                        <label>Votre prix de vente </label>
                                        <input
                                          id="prix"
                                          name="prix"
                                          [(ngModel)]="formData.prix"
                                          placeholder="Prix de votre annonce"
                                          type="number"
                                          required
                                          (ngModelChange)="clearError('prix')"
                                        />
                                        <div
                                          *ngIf="fieldErrors.prix"
                                          class="text-danger requisDiv"
                                        >
                                          <div>Prix est requis.</div>
                                        </div>
                                        <!-- <div
                                          *ngIf="minPrix && maxPrix"
                                          class="text-infos"
                                          style="
                                            margin-top: 1rem;
                                            color: black !important;
                                          "
                                        >
                                          <div>
                                            Prix recommandé entre
                                            {{ minPrix }} DH et {{ maxPrix }} DH
                                          </div>
                                        </div> -->
                                        <!-- Ajoutez les autres messages d'erreur de validation ici si nécessaire -->
                                      </div>
                                    </div>

                                    <!-- <div class="row">
                                      <label style="margin-bottom: 1rem"
                                        >Annonces similaires en vente
                                      </label>
                                      <p-carousel
                                        [numVisible]="6"
                                        [value]="filteredAds"
                                        [numScroll]="1"
                                        [circular]="false"
                                        [showIndicators]="false"
                                        class="custom-carousel"
                                      >
                                        <ng-template pTemplate="item" let-ad>
                                          <div class="col-md-6 ColProduct">
                                            <div
                                              class="product-cart-wrap mb-30 wow animate__animated animate__fadeIn"
                                              data-wow-delay=".1s"
                                            >
                                              <div
                                                class="product-img-action-wrap"
                                              >
                                                <div
                                                  class="product-img product-img-zoom"
                                                >
                                                  <a>
                                                    <img
                                                      class="default-img"
                                                      [src]="
                                                        ad.medias &&
                                                        ad.medias.length > 0
                                                          ? ad.medias[0].url
                                                          : ''
                                                      "
                                                      alt=""
                                                    />
                                                    <img
                                                      class="hover-img"
                                                      [src]="
                                                        ad.medias &&
                                                        ad.medias.length > 0
                                                          ? ad.medias[0].url
                                                          : ''
                                                      "
                                                      alt=""
                                                    />
                                                  </a>
                                                </div>
                                              </div>
                                              <div class="product-content-wrap">
                                                <div
                                                  class="product-category"
                                                  style="margin-top: 1rem"
                                                >
                                                  <a>{{ ad.category.name }}</a>
                                                </div>
                                                <h2 style="margin: 1rem 0 1rem">
                                                  <a>{{ ad.title }}</a>
                                                </h2>
                                                <div class="product-rate-cover">
                                                  <span
                                                    class="font-small text-muted"
                                                    >{{ ad.price }} DH</span
                                                  >
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                        </ng-template>
                                      </p-carousel>
                                    </div> -->
                                  </div>
                                </div>
                              </div>
                              <div class="flex pt-4 justify-content-between">
                                <p-button
                                  label="Retour"
                                  icon="pi pi-arrow-left"
                                  (onClick)="prevCallback.emit()"
                                />

                                <p-button
                                  label="Confirmer"
                                  icon="pi pi-check"
                                  iconPos="right"
                                  (click)="onSubmit()"
                                ></p-button>
                              </div>
                            </ng-template>
                          </p-stepperPanel>
                        </p-stepper>
                      </form>

                      <style>
                        .dropzone {
                          border: dashed 4px #ddd !important ;
                          background-color: #f2f6fc;
                          border-radius: 15px;
                        }

                        .dropzone .dropzone-container {
                          padding: 2rem 0;
                          width: 100%;
                          height: 100%;
                          position: relative;
                          display: flex;
                          flex-direction: column;
                          justify-content: center;
                          align-items: center;
                          color: #8c96a8;
                          z-index: 20;
                        }

                        .dropzone .file-input {
                          position: absolute;
                          width: 100%;
                          height: 100%;
                          top: 0;
                          left: 0;
                          opacity: 0;
                          visibility: hidden;
                          cursor: pointer;
                        }

                        .file-icon {
                          font-size: 60px;
                        }
                        .hr-sect {
                          display: flex;
                          flex-basis: 100%;
                          align-items: center;
                          margin: 8px 0px;
                        }
                        .hr-sect:before,
                        .hr-sect:after {
                          content: "";
                          flex-grow: 1;
                          background: #ddd;
                          height: 1px;
                          font-size: 0px;
                          line-height: 0px;
                          margin: 0px 8px;
                        }
                      </style>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <app-footer></app-footer>
  <app-preloader></app-preloader>
</main>
