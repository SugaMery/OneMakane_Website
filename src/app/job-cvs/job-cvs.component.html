<app-header></app-header>
<main class="main pages">
  <div class="page-header breadcrumb-wrap">
    <div class="container">
      <div class="breadcrumb">
        <a href="/" rel="nofollow"><i class="fi-rs-home mr-5"></i>Accueil</a>
        <span></span> Pages <span></span> Mon Compte
      </div>
    </div>
  </div>
  <div class="page-content pt-50 pb-50">
    <div class="container">
      <div class="row">
        <div class="col-lg-12 m-auto">
          <div class="row">
            <div class="col-md-7">
              <div
                class="tab-content account dashboard-content"
                [ngClass]="{ 'pl-50': !isPhone() }"
              >
                <a
                  class="btn btn-fill-out btn-block mt-30"
                  style="
                    background: linear-gradient(45deg, #6b7280, #6b7280);
                    width: auto;
                    margin-bottom: 1rem;
                  "
                  (click)="onRetournerClick()"
                >
                  <i class="fi-rs-sign-in ml-15"></i> Retourner
                </a>

                <div class="card">
                  <div class="card-header">
                    <h3 class="mb-0">
                      Liste des candidats pour cette offre d'emploi
                    </h3>
                  </div>
                  <div class="card-body">
                    <div class="table-responsive">
                      <div class="table-responsive shopping-summery">
                        <!-- Message when there are no candidates -->

                        <!-- Table displaying candidates when there are candidates -->
                        <table class="table table-wishlist">
                          <thead>
                            <tr class="main-heading">
                              <th class="custome-checkbox start pl-30">
                                <input
                                  class="form-check-input"
                                  type="checkbox"
                                  name="checkbox"
                                  id="exampleCheckbox11"
                                  value=""
                                />
                                <label
                                  class="form-check-label"
                                  for="exampleCheckbox11"
                                ></label>
                              </th>
                              <th scope="col">Nom Complet</th>
                              <th scope="col">Email</th>
                              <th scope="col">Téléphone</th>
                              <th scope="col">Date de Postulation</th>
                              <th scope="col">CV</th>
                              <th scope="col" class="end">Supprimé</th>
                            </tr>
                          </thead>
                          <tbody *ngIf="paginatedAdsCvs.length > 0">
                            <tr
                              *ngFor="let appliance of paginatedAdsCvs"
                              class="pt-30"
                            >
                              <td class="custome-checkbox pl-30">
                                <input
                                  class="form-check-input"
                                  type="checkbox"
                                  name="checkbox"
                                  id="exampleCheckbox{{ appliance.id }}"
                                  value=""
                                />
                                <label
                                  class="form-check-label"
                                  for="exampleCheckbox{{ appliance.id }}"
                                ></label>
                              </td>
                              <td>{{ appliance.user.full_name }}</td>
                              <td>{{ appliance.user.email }}</td>
                              <td>{{ appliance.user.telephone }}</td>
                              <td>{{ extractDate(appliance.created_at) }}</td>
                              <td>
                                <a
                                  (click)="
                                    updateCvUrl(
                                      'https://medias.onemakan.com/' +
                                        appliance.c_v.path +
                                        appliance.c_v.filename +
                                        '.' +
                                        appliance.c_v.extension
                                    )
                                  "
                                  target="_blank"
                                  class="appliance"
                                >
                                  Voir le CV
                                </a>
                              </td>
                              <td class="text-center" data-title="Supprimer">
                                <a
                                  class="text-body"
                                  (click)="showDialog(appliance)"
                                >
                                  <i class="fi-rs-trash"></i>
                                </a>
                              </td>
                            </tr>
                          </tbody>
                          <tr *ngIf="paginatedAdsCvs.length === 0">
                            <td colspan="7" class="text-center">
                              Aucun candidat n'a postulé pour cette offre
                              d'emploi.
                            </td>
                          </tr>
                        </table>

                        <!-- Pagination -->
                        <div
                          class="pagination-area mt-20 mb-20"
                          *ngIf="paginatedAdsCvs.length > 0"
                        >
                          <nav aria-label="Page navigation example">
                            <ul class="pagination justify-content-start">
                              <li
                                class="page-item"
                                [class.disabled]="currentPage === 1"
                              >
                                <a
                                  class="page-link"
                                  (click)="changePages(currentPage - 1)"
                                >
                                  <i class="fi-rs-arrow-small-left"></i>
                                </a>
                              </li>
                              <li
                                *ngFor="let page of getPagesArrays()"
                                class="page-item"
                                [class.active]="page === currentPage"
                              >
                                <a
                                  class="page-link"
                                  (click)="changePages(page)"
                                  >{{ page }}</a
                                >
                              </li>
                              <li
                                class="page-item"
                                [class.disabled]="currentPage === totalPagecv"
                              >
                                <a
                                  class="page-link"
                                  (click)="changePages(currentPage + 1)"
                                >
                                  <i class="fi-rs-arrow-small-right"></i>
                                </a>
                              </li>
                            </ul>
                          </nav>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-md-4">
              <div
                class="tab-content account dashboard-content"
                [ngClass]="{ 'pl-50': !isPhone() }"
              >
                <div>
                  <iframe
                    [src]="cvUrl"
                    style="width: 100%; height: 700px"
                  ></iframe>
                </div>
                <div>
                  <!-- Additional content if needed -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>

<app-footer></app-footer>
