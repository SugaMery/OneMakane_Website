"use strict";(()=>{var yt=Object.defineProperty,ht=Object.defineProperties;var _t=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var Et=Object.prototype.hasOwnProperty,vt=Object.prototype.propertyIsEnumerable;var $=(t,e,n)=>e in t?yt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,c=(t,e)=>{for(var n in e||(e={}))Et.call(e,n)&&$(t,n,e[n]);if(q)for(var n of q(e))vt.call(e,n)&&$(t,n,e[n]);return t},x=(t,e)=>ht(t,_t(e));var I="https://unifyintent.com/analytics/api/v1";var xt=/^[A-Za-z0-9._+%-]+@[A-Za-z0-9.-]+[.][A-Za-z]+$/;function k(t,e){var n;return((n=e==null?void 0:e.getTime())!=null?n:new Date().getTime())+t*60*1e3}var A=t=>({path:t!=null?t:window.location.pathname,query:At(window.location.href),referrer:document.referrer,title:document.title,url:t!==void 0?It({location:window.location,pathname:t}):window.location.href});function It({location:t,pathname:e}){let n=new URL(t.href);return n.pathname=e,n.toString()}var S=()=>({userAgent:window.navigator.userAgent,userAgentData:window.navigator.userAgentData}),D=t=>{if(xt.test(t))return t},At=t=>{let e=new URL(t).searchParams,n={};for(let[r,i]of e.entries())n[r]=i;return n};var Z=()=>{var n,r,i,o,a;let t=new URL(location.href),e={source:(n=t.searchParams.get("utm_source"))!=null?n:void 0,medium:(r=t.searchParams.get("utm_medium"))!=null?r:void 0,campaign:(i=t.searchParams.get("utm_campaign"))!=null?i:void 0,term:(o=t.searchParams.get("utm_term"))!=null?o:void 0,content:(a=t.searchParams.get("utm_content"))!=null?a:void 0};return x(c({locale:navigator.language},S()),{utm:e})};var V=class{constructor(e){this.getBaseActivityPayload=()=>({type:this.getActivityType(),anonymousUserId:this._intentContext.identityManager.getOrCreateAnonymousUserId(),sessionId:this._intentContext.sessionManager.getOrCreateSession().sessionId,context:Z(),timestamp:new Date().toISOString()});this._intentContext=e}track(){this._intentContext.apiClient.post(this.getActivityURL(),c(c({},this.getBaseActivityPayload()),this.getActivityData()))}},C=V;var St=`${I}/page`,p=class extends C{constructor(n,r){super(n);this.getActivityData=()=>{var n;return{type:"page",properties:A((n=this._options)==null?void 0:n.pathname)}};this._options=r}getActivityType(){return"page"}getActivityURL(){return St}};var Dt=`${I}/identify`,g=class extends C{constructor(n,{email:r}){super(n);this.getActivityData=()=>({type:"identify",traits:{email:this._email}});this._email=r}getActivityType(){return"identify"}getActivityURL(){return Dt}};var b,Ct=new Uint8Array(16);function K(){if(!b&&(b=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!b))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return b(Ct)}var s=[];for(let t=0;t<256;++t)s.push((t+256).toString(16).slice(1));function W(t,e=0){return s[t[e+0]]+s[t[e+1]]+s[t[e+2]]+s[t[e+3]]+"-"+s[t[e+4]]+s[t[e+5]]+"-"+s[t[e+6]]+s[t[e+7]]+"-"+s[t[e+8]]+s[t[e+9]]+"-"+s[t[e+10]]+s[t[e+11]]+s[t[e+12]]+s[t[e+13]]+s[t[e+14]]+s[t[e+15]]}var bt=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),H={randomUUID:bt};function Tt(t,e,n){if(H.randomUUID&&!e&&!t)return H.randomUUID();t=t||{};let r=t.random||(t.rng||K)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return W(r)}var _=Tt;function T(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var Ut={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function G(t,e){function n(i,o,a){if(typeof document!="undefined"){a=T({},e,a),typeof a.expires=="number"&&(a.expires=new Date(Date.now()+a.expires*864e5)),a.expires&&(a.expires=a.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var d="";for(var l in a)a[l]&&(d+="; "+l,a[l]!==!0&&(d+="="+a[l].split(";")[0]));return document.cookie=i+"="+t.write(o,i)+d}}function r(i){if(!(typeof document=="undefined"||arguments.length&&!i)){for(var o=document.cookie?document.cookie.split("; "):[],a={},d=0;d<o.length;d++){var l=o[d].split("="),mt=l.slice(1).join("=");try{var B=decodeURIComponent(l[0]);if(a[B]=t.read(mt,B),i===B)break}catch(Wt){}}return i?a[i]:a}}return Object.create({set:n,get:r,remove:function(i,o){n(i,"",T({},o,{expires:-1}))},withAttributes:function(i){return G(this.converter,T({},this.attributes,i))},withConverter:function(i){return G(T({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var U=G(Ut,{path:"/"});var m=typeof Buffer=="function",Q=typeof TextDecoder=="function"?new TextDecoder:void 0,J=typeof TextEncoder=="function"?new TextEncoder:void 0,wt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",E=Array.prototype.slice.call(wt),w=(t=>{let e={};return t.forEach((n,r)=>e[n]=r),e})(E),Pt=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,u=String.fromCharCode.bind(String),X=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),Ft=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),et=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),Rt=t=>{let e,n,r,i,o="",a=t.length%3;for(let d=0;d<t.length;){if((n=t.charCodeAt(d++))>255||(r=t.charCodeAt(d++))>255||(i=t.charCodeAt(d++))>255)throw new TypeError("invalid character found");e=n<<16|r<<8|i,o+=E[e>>18&63]+E[e>>12&63]+E[e>>6&63]+E[e&63]}return a?o.slice(0,a-3)+"===".substring(a):o},nt=typeof btoa=="function"?t=>btoa(t):m?t=>Buffer.from(t,"binary").toString("base64"):Rt,Mt=m?t=>Buffer.from(t).toString("base64"):t=>{let n=[];for(let r=0,i=t.length;r<i;r+=4096)n.push(u.apply(null,t.subarray(r,r+4096)));return nt(n.join(""))};var Lt=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?u(192|e>>>6)+u(128|e&63):u(224|e>>>12&15)+u(128|e>>>6&63)+u(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return u(240|e>>>18&7)+u(128|e>>>12&63)+u(128|e>>>6&63)+u(128|e&63)}},Nt=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Ot=t=>t.replace(Nt,Lt),tt=m?t=>Buffer.from(t,"utf8").toString("base64"):J?t=>Mt(J.encode(t)):t=>nt(Ot(t)),P=(t,e=!1)=>e?Ft(tt(t)):tt(t);var Bt=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,kt=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),n=e-65536;return u((n>>>10)+55296)+u((n&1023)+56320);case 3:return u((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return u((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},Vt=t=>t.replace(Bt,kt),Kt=t=>{if(t=t.replace(/\s+/g,""),!Pt.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,n="",r,i;for(let o=0;o<t.length;)e=w[t.charAt(o++)]<<18|w[t.charAt(o++)]<<12|(r=w[t.charAt(o++)])<<6|(i=w[t.charAt(o++)]),n+=r===64?u(e>>16&255):i===64?u(e>>16&255,e>>8&255):u(e>>16&255,e>>8&255,e&255);return n},rt=typeof atob=="function"?t=>atob(et(t)):m?t=>Buffer.from(t,"base64").toString("binary"):Kt,Ht=m?t=>X(Buffer.from(t,"base64")):t=>X(rt(t).split("").map(e=>e.charCodeAt(0)));var Gt=m?t=>Buffer.from(t,"base64").toString("utf8"):Q?t=>Q.decode(Ht(t)):t=>Vt(rt(t)),Yt=t=>et(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),it=t=>Gt(Yt(t));var Y="test";function j(t){return P(JSON.stringify(t))}function ot(t){return JSON.parse(it(t))}function at(){try{return localStorage.setItem(Y,Y),localStorage.removeItem(Y),!0}catch(t){return!1}}function st(t){return(t!=null?t:window.location.hostname).split(".").slice(-2).join(".")}var z=class{constructor(e){this.get=e=>{let n=this.retrieveValue(this.buildKey(e));return n?ot(n):null};this.set=(e,n)=>{this.storeValue(this.buildKey(e),j(n))};this.buildKey=e=>j(`${this._writeKey}_${e}`);this._writeKey=e}},F=z;var R=class extends F{retrieveValue(e){var r;let n=(r=U.get(e))!=null?r:null;return n&&(U.remove(e),this.storeValue(e,n)),n}storeValue(e,n){U.set(e,n,{domain:`.${st()}`,expires:365})}};var M=class extends F{constructor(n){super(n);this.retrieveValue=n=>this._localStorageAvailable?localStorage.getItem(n):null;this.storeValue=(n,r)=>{this._localStorageAvailable&&localStorage.setItem(n,r)};this._localStorageAvailable=at()}};var ut="anonymousUserId",L=class{constructor(e){this.getOrCreateAnonymousUserId=()=>{if(this._anonymousUserId)return this._anonymousUserId;let e=this.getAnonymousUserId()||this.createAnonymousUserId();return this._anonymousUserId=e,e};this.getAnonymousUserId=()=>this._storageService.get(ut);this.createAnonymousUserId=()=>{let e=_();return this._storageService.set(ut,e),e};this._storageService=new R(e),this._anonymousUserId=null}};var dt="clientSession",ct=30,N=class{constructor(e){this.getOrCreateSession=()=>this.getAndUpdateSession()||this.createSession();this.getAndUpdateSession=()=>{let e=this._currentSession||this.getStoredSession();if(!e)return;if(e.expiration>new Date().getTime())return this.updateSessionExpiration(e)};this.createSession=(e=ct)=>{let n=c({sessionId:_(),startTime:new Date,expiration:k(e),initial:A()},S());return this._currentSession=n,this.setStoredSession(n),n};this.updateSessionExpiration=(e,n=ct)=>{let r=x(c({},e),{expiration:k(n)});return this._currentSession=r,this.setStoredSession(r),r};this.getStoredSession=()=>this._storageService.get(dt);this.setStoredSession=e=>{this._storageService.set(dt,e)};this._writeKey=e,this._storageService=new M(this._writeKey),this._currentSession=null}};var v=class{constructor(e){this.post=(e,n)=>{let r=JSON.stringify(n),i=this.getAuthString(this._writeKey);if(fetch)fetch(e,{method:"POST",body:r,credentials:"include",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:this.getAuthString(this._writeKey)},keepalive:!0}).catch(()=>{});else{let o=new XMLHttpRequest;o.open("POST",e,!0),o.setRequestHeader("Content-type","application/json; charset=UTF-8"),o.setRequestHeader("Authorization",i),o.send(r)}};this._writeKey=e}getAuthString(e){return`Basic ${P(e+":")}`}};function f({message:t}){console.debug(`%c[Unify]: %c${t}`,"font-weight: bold;","")}var lt="https://forms.default.com",ft="https://capture.navattic.com",pt=["default.form_completed","deafult.form_page_submitted","default.form_page_submitted"],O="user.email";function gt(t){return pt.includes(t.event)}var y=class{constructor(e){this.startAutoPage=()=>{this._historyMonitored||this.monitorHistory(),this._autoPage=!0};this.stopAutoPage=()=>{this._historyMonitored&&window.removeEventListener("popstate",this.maybeTrackPage),this._autoPage=!1};this.startAutoIdentify=()=>{this._autoIdentify=!0,this.refreshMonitoredInputs(),setInterval(this.refreshMonitoredInputs,2e3),this.subscribeToThirdPartyMessages()};this.stopAutoIdentify=()=>{this._monitoredInputs.forEach(e=>{e.isConnected&&(e.removeEventListener("blur",this.handleInputBlur),e.removeEventListener("keydown",this.handleInputKeydown))}),this._monitoredInputs.clear(),this.unsubscribeFromThirdPartyMessages(),this._autoIdentify=!1};this.monitorHistory=()=>{let e=history.pushState;history.pushState=(...r)=>{e.apply(history,r),this.maybeTrackPage()};let n=history.replaceState;history.replaceState=(...r)=>{n.apply(history,r),this.maybeTrackPage()},window.addEventListener("popstate",this.maybeTrackPage),this._historyMonitored=!0};this.maybeTrackPage=()=>{this._autoPage&&(!this._lastLocation||jt(this._lastLocation,window.location))&&(new p(this._intentContext).track(),this._lastLocation=c({},window.location))};this.refreshMonitoredInputs=()=>{if(!this._autoIdentify)return;this._monitoredInputs.forEach(n=>{n.isConnected||this._monitoredInputs.delete(n)}),Array.from(document.getElementsByTagName("input")).filter(n=>!this._monitoredInputs.has(n)&&zt(n)).forEach(n=>{n.addEventListener("blur",this.handleInputBlur),n.addEventListener("keydown",this.handleInputKeydown),this._monitoredInputs.add(n)})};this.subscribeToThirdPartyMessages=()=>{window.addEventListener("message",this.handleThirdPartyMessage)};this.unsubscribeFromThirdPartyMessages=()=>{window.removeEventListener("message",this.handleThirdPartyMessage)};this.handleThirdPartyMessage=e=>{if(!this._autoIdentify)return;let n;try{switch(e.origin){case lt:{n="Default",this.handleDefaultFormMessage(e);break}case ft:{n="Navattic",this.handleNavatticDemoMessage(e);break}}}catch(r){f({message:`Error occurred while handling message from third-party (${n}): ${r.message}`})}};this.handleDefaultFormMessage=e=>{if(this._autoIdentify&&gt(e.data)){let n=e.data.payload.email;n&&this.maybeIdentifyInputEmail(n)}};this.handleNavatticDemoMessage=e=>{var n,r;if(this._autoIdentify&&e.data.type==="IDENTIFY_USER"){let i=(n=e.data.eventAttributes.FORM)==null?void 0:n[O];if(i)this.maybeIdentifyInputEmail(i);else{let o=(r=Object.values(e.data.eventAttributes).find(a=>O in a))==null?void 0:r[O];o&&this.maybeIdentifyInputEmail(o)}}};this.handleInputBlur=e=>{this._autoIdentify&&e.target instanceof HTMLInputElement&&this.maybeIdentifyInputEmail(e.target.value)};this.handleInputKeydown=e=>{this._autoIdentify&&e.key==="Enter"&&e.target instanceof HTMLInputElement&&this.maybeIdentifyInputEmail(e.target.value)};this.maybeIdentifyInputEmail=e=>{if(this._autoIdentify&&e){if(!D(e)||this._submittedEmails.has(e))return;new g(this._intentContext,{email:e}).track(),this._submittedEmails.add(e)}};this.__getMonitoredInputs=()=>this._monitoredInputs;this.__getSubmittedEmails=()=>this._submittedEmails;var n,r;this._intentContext=e,this._monitoredInputs=new Set,this._submittedEmails=new Set,this._autoPage=(n=e.clientConfig.autoPage)!=null?n:!1,this._autoIdentify=(r=e.clientConfig.autoIdentify)!=null?r:!1,this._historyMonitored=!1,this._autoPage&&(this.startAutoPage(),this.maybeTrackPage()),this._autoIdentify&&this.startAutoIdentify()}};function jt(t,e){return t.hostname!==e.hostname||t.pathname!==e.pathname}function zt(t){return t.type==="email"||t.type==="text"}var qt={autoPage:!1,autoIdentify:!1},h=class{constructor(e,n=qt){this._mounted=!1;this.mount=()=>{if(typeof window=="undefined")return;if(window.unify!==void 0&&!Array.isArray(window.unify)){f({message:"UnifyIntentClient already exists on window, a new one will not be created."});return}let e=new v(this._writeKey),n=new N(this._writeKey);n.getOrCreateSession();let r=new L(this._writeKey);r.getOrCreateAnonymousUserId(),this._context={writeKey:this._writeKey,clientConfig:this._config,apiClient:e,sessionManager:n,identityManager:r},(this._config.autoPage||this._config.autoIdentify)&&(this._intentAgent=new y(this._context)),this._mounted=!0,$t(this),window.unify=this};this.unmount=()=>{typeof window!="undefined"&&(this._config.autoPage&&this.stopAutoPage(),this._config.autoIdentify&&this.stopAutoIdentify(),this._mounted=!1,window.unify=void 0)};this.page=e=>{if(!this._mounted)return;new p(this._context,e).track()};this.identify=e=>{if(!this._mounted)return!1;let n=D(e);return n?(new g(this._context,{email:n}).track(),!0):!1};this.startAutoPage=()=>{this._mounted&&(this._intentAgent||(this._intentAgent=new y(this._context)),this._intentAgent.startAutoPage())};this.stopAutoPage=()=>{var e;this._mounted&&((e=this._intentAgent)==null||e.stopAutoPage())};this.startAutoIdentify=()=>{this._mounted&&(this._intentAgent||(this._intentAgent=new y(this._context)),this._intentAgent.startAutoIdentify())};this.stopAutoIdentify=()=>{var e;this._mounted&&((e=this._intentAgent)==null||e.stopAutoIdentify())};this._writeKey=e,this._config=n}};function $t(t){(Array.isArray(window.unify)?[...window.unify]:[]).forEach(([n,r])=>{if(typeof t[n]=="function")try{Array.isArray(r)?t[n].call(t,...r):t[n].call(t)}catch(i){f({message:i==null?void 0:i.message})}})}var Zt=function(){var n;if(typeof window=="undefined")return;if(window.unify!==void 0&&!Array.isArray(window.unify)){f({message:"UnifyIntentClient already exists on window, a new one will not be created."});return}let t=document.getElementById("unifytag"),e=(n=t==null?void 0:t.getAttribute("data-write-key"))!=null?n:t==null?void 0:t.getAttribute("data-api-key");e&&new h(e,{autoPage:!0,autoIdentify:!0}).mount()};Zt();})();
/*! Bundled license information:

js-cookie/dist/js.cookie.mjs:
  (*! js-cookie v3.0.5 | MIT *)
*/
